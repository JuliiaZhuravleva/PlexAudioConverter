# üì• Download Monitor Test

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞–≥—Ä—É–∑–æ–∫ —Ç–æ—Ä—Ä–µ–Ω—Ç-—Ñ–∞–π–ª–æ–≤. –°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ—Ç–µ–∫—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏.

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –¥–µ—Ç–µ–∫—Ü–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
- **–ü—Ä–æ–≤–µ—Ä–∫–∞** —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–æ—Ä—Ä–µ–Ω—Ç-–∫–ª–∏–µ–Ω—Ç–∞–º–∏
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å—Ç–∞—Ç—É—Å–µ —Ñ–∞–π–ª–æ–≤
- **–û—Ç–ª–∞–¥–∫–∞** –ø—Ä–æ–±–ª–µ–º —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∑–∞–≥—Ä—É–∑–æ–∫

## üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –§–∞–π–ª—ã —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏ (.part, .!ut, .!qb)
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
- –î–µ—Ç–µ–∫—Ü–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–æ—Ä—Ä–µ–Ω—Ç-–∫–ª–∏–µ–Ω—Ç—ã
- **uTorrent** - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è .!ut
- **qBittorrent** - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è .!qb
- **Transmission/Deluge** - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è .part
- **–û–±—â–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã** - .tmp, .download, .incomplete

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
```bash
# –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç
python download_monitor_test.py

# –¢–µ—Å—Ç —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π
python download_monitor_test.py --test-dir "/temp/download_test"

# –£—Å–∫–æ—Ä–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç (–∫–æ—Ä–æ—Ç–∫–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã)
python download_monitor_test.py --quick

# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
python download_monitor_test.py --verbose
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
- `--test-dir DIR` - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- `--quick` - —É—Å–∫–æ—Ä–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º (5 —Å–µ–∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏)
- `--verbose` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `--no-cleanup` - –Ω–µ —É–¥–∞–ª—è—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
- `--stability-time SEC` - –≤—Ä–µ–º—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- `--client TYPE` - —Ç–µ—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ (utorrent, qbittorrent, transmission)

## üìã –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –§–∞–π–ª —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .part
```
üìÅ –°–æ–∑–¥–∞–Ω–∏–µ: movie1.mkv.part (50 –ú–ë)
‚è±Ô∏è –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏: —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –¥–µ—Ç–µ–∫—Ü–∏—è —Ä–æ—Å—Ç–∞ —Ñ–∞–π–ª–∞
‚úÖ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ: movie1.mkv.part ‚Üí movie1.mkv
üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: DOWNLOADING ‚Üí COMPLETED
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: uTorrent —Ñ–∞–π–ª (.!ut)
```
üìÅ –°–æ–∑–¥–∞–Ω–∏–µ: movie2.mp4.!ut (75 –ú–ë)
‚è±Ô∏è –°–∏–º—É–ª—è—Ü–∏—è: –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –¥–µ—Ç–µ–∫—Ü–∏—è –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è: movie2.mp4.!ut ‚Üí movie2.mp4
üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: DOWNLOADING ‚Üí COMPLETED
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°—Ç–∞–±–∏–ª—å–Ω—ã–π —Ñ–∞–π–ª
```
üìÅ –°–æ–∑–¥–∞–Ω–∏–µ: movie3.avi (100 –ú–ë)
‚è±Ô∏è –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: —Ä–∞–∑–º–µ—Ä –æ—Å—Ç–∞–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º
üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –¥–µ—Ç–µ–∫—Ü–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: UNKNOWN ‚Üí COMPLETED
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
```
üìÅ –°–æ–∑–¥–∞–Ω–∏–µ: movie4.mkv (80 –ú–ë)
üîí –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞: –æ—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: –¥–µ—Ç–µ–∫—Ü–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
üîì –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞: –∑–∞–∫—Ä—ã—Ç–∏–µ —Ñ–∞–π–ª–∞
üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: DOWNLOADING ‚Üí COMPLETED
```

## üîç –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ö–ª–∞—Å—Å DownloadMonitorTester
```python
class DownloadMonitorTester:
    def __init__(self, test_dir="/temp/download_test"):
        self.test_dir = Path(test_dir)
        self.monitor = DownloadMonitor(stability_threshold=5.0)
        self.monitor.add_callback(self._on_status_change)
        
    def _on_status_change(self, file_info):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞"""
        print(f"üìä {file_info.file_path.name} -> {file_info.status.value}")
        print(f"   –ú–µ—Ç–æ–¥: {file_info.detection_method}")
        print(f"   –†–∞–∑–º–µ—Ä: {file_info.size / (1024*1024):.1f} –ú–ë")
```

### –ú–µ—Ç–æ–¥—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```python
def test_part_file_scenario(self):
    """–¢–µ—Å—Ç —Ñ–∞–π–ª–∞ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º .part"""
    
    # –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ .part
    part_file = self.test_dir / "movie.mkv.part"
    self._create_file(part_file, 50 * 1024 * 1024)
    
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
    self.monitor.add_file(part_file)
    
    # –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
    await self._simulate_download(part_file)
    
    # –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª
    final_file = part_file.with_suffix('')
    part_file.rename(final_file)
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
    assert self.monitor.get_status(final_file) == DownloadStatus.COMPLETED
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –§–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–∞
```
=== –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞–≥—Ä—É–∑–æ–∫ ===

üìÅ –¢–µ—Å—Ç–æ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: /temp/download_test
‚è±Ô∏è –í—Ä–µ–º—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏: 5.0 —Å–µ–∫—É–Ω–¥
üîÑ –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏: 1.0 —Å–µ–∫—É–Ω–¥

–¢–µ—Å—Ç 1: –§–∞–π–ª .part
‚îú‚îÄ –°—Ç–∞—Ç—É—Å: ‚úÖ –ü–†–û–ô–î–ï–ù
‚îú‚îÄ –í—Ä–µ–º—è: 12.3 —Å–µ–∫
‚îú‚îÄ –î–µ—Ç–µ–∫—Ü–∏—è: extension_based
‚îî‚îÄ –ü–µ—Ä–µ—Ö–æ–¥—ã: DOWNLOADING ‚Üí COMPLETED

–¢–µ—Å—Ç 2: uTorrent —Ñ–∞–π–ª (.!ut)
‚îú‚îÄ –°—Ç–∞—Ç—É—Å: ‚úÖ –ü–†–û–ô–î–ï–ù
‚îú‚îÄ –í—Ä–µ–º—è: 8.7 —Å–µ–∫
‚îú‚îÄ –î–µ—Ç–µ–∫—Ü–∏—è: extension_based
‚îî‚îÄ –ü–µ—Ä–µ—Ö–æ–¥—ã: DOWNLOADING ‚Üí COMPLETED

–¢–µ—Å—Ç 3: –°—Ç–∞–±–∏–ª—å–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ –°—Ç–∞—Ç—É—Å: ‚úÖ –ü–†–û–ô–î–ï–ù
‚îú‚îÄ –í—Ä–µ–º—è: 6.2 —Å–µ–∫
‚îú‚îÄ –î–µ—Ç–µ–∫—Ü–∏—è: stability_based
‚îî‚îÄ –ü–µ—Ä–µ—Ö–æ–¥—ã: UNKNOWN ‚Üí COMPLETED

–¢–µ—Å—Ç 4: –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ –°—Ç–∞—Ç—É—Å: ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û
‚îú‚îÄ –í—Ä–µ–º—è: 15.1 —Å–µ–∫
‚îú‚îÄ –î–µ—Ç–µ–∫—Ü–∏—è: lock_based
‚îî‚îÄ –ü–µ—Ä–µ—Ö–æ–¥—ã: DOWNLOADING ‚Üí COMPLETED (—Å –∑–∞–¥–µ—Ä–∂–∫–æ–π)

üìä –û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 4/4 —Ç–µ—Å—Ç–∞ –ø—Ä–æ–π–¥–µ–Ω–æ
‚è±Ô∏è –û–±—â–µ–µ –≤—Ä–µ–º—è: 42.3 —Å–µ–∫—É–Ω–¥—ã
```

### JSON –æ—Ç—á–µ—Ç
```json
{
  "test_session": {
    "timestamp": "2024-01-15T10:30:00",
    "duration": 42.3,
    "test_dir": "/temp/download_test",
    "stability_threshold": 5.0
  },
  "tests": [
    {
      "name": "part_file_scenario",
      "status": "PASSED",
      "duration": 12.3,
      "file": "movie1.mkv.part",
      "detection_method": "extension_based",
      "status_transitions": ["DOWNLOADING", "COMPLETED"]
    }
  ],
  "summary": {
    "total_tests": 4,
    "passed": 4,
    "failed": 0,
    "success_rate": 100.0
  }
}
```

## üõ†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
```python
def create_custom_scenario(self, scenario_config):
    """–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è"""
    
    file_path = self.test_dir / scenario_config['filename']
    
    # –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    self._create_file(file_path, scenario_config['initial_size'])
    
    # –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏—è
    for step in scenario_config['steps']:
        await self._apply_step(file_path, step)
        
    return self._validate_result(file_path, scenario_config['expected'])
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
```yaml
scenarios:
  - name: "slow_download"
    filename: "slow_movie.mkv.part"
    initial_size: 10MB
    steps:
      - action: "grow"
        size: "5MB"
        delay: 2
      - action: "pause"
        duration: 10
      - action: "grow" 
        size: "15MB"
        delay: 1
      - action: "complete"
    expected: "COMPLETED"
```

### –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
def stress_test(self, num_files=100):
    """–°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏"""
    
    files = []
    for i in range(num_files):
        file_path = self.test_dir / f"stress_test_{i}.mkv.part"
        self._create_file(file_path, random.randint(10, 100) * 1024 * 1024)
        files.append(file_path)
        
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
    for file_path in files:
        self.monitor.add_file(file_path)
        
    # –°–∏–º—É–ª—è—Ü–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
    await asyncio.gather(*[
        self._simulate_random_download(f) for f in files
    ])
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    return self._validate_stress_results(files)
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –¢–µ—Å—Ç—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
python -c "from core.download_monitor import DownloadMonitor; print('OK')"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
python -c "from pathlib import Path; Path('/temp/test').mkdir(parents=True, exist_ok=True); print('OK')"
```

#### –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è
```python
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
python download_monitor_test.py --stability-time 10

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –±—ã—Å—Ç—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤
python download_monitor_test.py --no-quick
```

#### –§–∞–π–ª—ã –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è
```bash
# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
python download_monitor_test.py --force-cleanup

# –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
rm -rf /temp/download_test/*
```

### –û—Ç–ª–∞–¥–∫–∞
```bash
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è
python download_monitor_test.py --verbose --debug

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤
python download_monitor_test.py --log-file "/temp/download_test.log"

# –¢–µ—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è
python download_monitor_test.py --scenario "part_file_only"
```

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
```python
import unittest

class TestDownloadMonitor(unittest.TestCase):
    def setUp(self):
        self.tester = DownloadMonitorTester("/temp/unittest")
        
    def test_part_file_detection(self):
        result = self.tester.test_part_file_scenario()
        self.assertTrue(result.success)
        self.assertEqual(result.final_status, DownloadStatus.COMPLETED)
        
    def tearDown(self):
        self.tester.cleanup()
```

### Continuous Integration
```yaml
# .github/workflows/download-monitor-tests.yml
name: Download Monitor Tests
on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
      - name: Run download monitor tests
        run: |
          python Tools/download_monitor_test.py --quick --json > test_results.json
      - name: Upload results
        uses: actions/upload-artifact@v3
        with:
          name: download-monitor-results
          path: test_results.json
```

---

*–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞–≥—Ä—É–∑–æ–∫ –∏ –ø–æ–º–æ–≥–∞–µ—Ç –≤—ã—è–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –¥–æ –∏—Ö –ø–æ—è–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.*
