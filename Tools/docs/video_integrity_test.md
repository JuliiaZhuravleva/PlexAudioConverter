# üé¨ Video Integrity Test

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –≤–∏–¥–µ–æ—Ñ–∞–π–ª–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FFmpeg/FFprobe. –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã—è–≤–ª—è—Ç—å –Ω–µ–ø–æ–ª–Ω—ã–µ, –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –≤–∏–¥–µ–æ—Ñ–∞–π–ª—ã.

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –¥–µ—Ç–µ–∫—Ü–∏–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –≤–∏–¥–µ–æ
- **–ü—Ä–æ–≤–µ—Ä–∫–∞** —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≤–∏–¥–µ–æ—Ñ–æ—Ä–º–∞—Ç–∞–º–∏
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** —Ç–æ—á–Ω–æ—Å—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ —Ñ–∞–π–ª–æ–≤
- **–û—Ç–ª–∞–¥–∫–∞** –ø—Ä–æ–±–ª–µ–º —Å FFmpeg –∞–Ω–∞–ª–∏–∑–æ–º

## üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ú–µ—Ç–æ–¥—ã –¥–µ—Ç–µ–∫—Ü–∏–∏ FFmpeg
- **–ê–Ω–∞–ª–∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞–¥—Ä–æ–≤
- **–¢–µ—Å—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏** - –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—á–∞—Å—Ç–∫–æ–≤** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞, —Å–µ—Ä–µ–¥–∏–Ω—ã –∏ –∫–æ–Ω—Ü–∞
- **–ë–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π —á–∏—Ç–∞–µ–º–æ–π —Å–µ–∫—É–Ω–¥—ã
- **–†–∞—Å—á–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞** - —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ–π/–∑–∞—è–≤–ª–µ–Ω–Ω–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –°—Ç–∞—Ç—É—Å—ã —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
- **COMPLETE** - —Ñ–∞–π–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é —á–∏—Ç–∞–µ—Ç—Å—è
- **INCOMPLETE** - —Ñ–∞–π–ª –æ–±—Ä—ã–≤–∞–µ—Ç—Å—è –∏–ª–∏ –Ω–µ–ø–æ–ª–Ω—ã–π
- **CORRUPTED** - —Å–µ—Ä—å–µ–∑–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- **UNREADABLE** - –Ω–µ —É–¥–∞–µ—Ç—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
- **UNKNOWN** - —Å—Ç–∞—Ç—É—Å –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
```bash
# –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
python video_integrity_test.py

# –¢–µ—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
python video_integrity_test.py --file "path/to/video.mkv"

# –ü–∞–∫–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
python video_integrity_test.py --directory "E:\Download\Movie"

# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
python video_integrity_test.py --verbose
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
- `--file PATH` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
- `--directory DIR` - –ø–∞–∫–µ—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- `--formats EXT1,EXT2` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º
- `--verbose` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `--json` - –≤—ã–≤–æ–¥ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- `--output-dir DIR` - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –æ—Ç—á–µ—Ç–æ–≤
- `--timeout SEC` - —Ç–∞–π–º–∞—É—Ç –¥–ª—è FFmpeg –æ–ø–µ—Ä–∞—Ü–∏–π

## üìã –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã
- **.mkv** - Matroska Video
- **.mp4** - MPEG-4 Part 14
- **.avi** - Audio Video Interleave
- **.mov** - QuickTime Movie
- **.wmv** - Windows Media Video
- **.flv** - Flash Video
- **.m4v** - iTunes Video
- **.webm** - WebM Video

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ–≤–µ—Ä–∫–∏
```
1. –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
   ‚îú‚îÄ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   ‚îú‚îÄ –ü–æ–¥—Å—á–µ—Ç –∫–∞–¥—Ä–æ–≤
   ‚îî‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤

2. –¢–µ—Å—Ç –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—á–∞–ª–∞
   ‚îú‚îÄ –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö 10 —Å–µ–∫—É–Ω–¥
   ‚îî‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—à–∏–±–∫–∏

3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–µ–¥–∏–Ω—ã –∏ –∫–æ–Ω—Ü–∞
   ‚îú‚îÄ –¢–µ—Å—Ç —Å—Ä–µ–¥–Ω–µ–π —á–∞—Å—Ç–∏ —Ñ–∞–π–ª–∞
   ‚îú‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 —Å–µ–∫—É–Ω–¥
   ‚îî‚îÄ –ë–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —É—á–∞—Å—Ç–∫–æ–≤

4. –†–∞—Å—á–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
   ‚îú‚îÄ –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —á–∏—Ç–∞–µ–º–æ–π/–∑–∞—è–≤–ª–µ–Ω–Ω–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   ‚îî‚îÄ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞

5. Fallback –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
   ‚îî‚îÄ –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö FFmpeg
```

## üîç –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ö–ª–∞—Å—Å VideoIntegrityChecker
```python
from core.video_integrity_checker import VideoIntegrityChecker, VideoIntegrityStatus

def test_video_integrity():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"""
    
    checker = VideoIntegrityChecker()
    
    test_files = [
        Path("complete_video.mkv"),
        Path("incomplete_download.mp4"),
        Path("corrupted_file.avi")
    ]
    
    for file_path in test_files:
        if file_path.exists():
            status = checker.check_integrity(file_path)
            print(f"{file_path.name}: {status.value}")
```

### –ú–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏
```python
def check_file_integrity(self, file_path):
    """–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞"""
    
    # 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
    metadata = self._get_video_metadata(file_path)
    if not metadata:
        return VideoIntegrityStatus.UNREADABLE
    
    # 2. –¢–µ—Å—Ç –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
    decode_result = self._test_decode_segments(file_path, metadata)
    
    # 3. –†–∞—Å—á–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
    readability_ratio = decode_result.readable_duration / metadata.total_duration
    
    # 4. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
    return self._determine_status(readability_ratio, decode_result)
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
```
=== –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –≤–∏–¥–µ–æ—Ñ–∞–π–ª–æ–≤ ===

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞: TWD.[S07E04].HD1080.DD5.1.LostFilm.mkv
–ü—É—Ç—å: E:/Download/Movie/TWD (Season 07) LOST 1080/TWD.[S07E04].HD1080.DD5.1.LostFilm.mkv
–°—É—â–µ—Å—Ç–≤—É–µ—Ç: True
–†–∞–∑–º–µ—Ä: 1847.3 MB

üìä –ê–Ω–∞–ª–∏–∑ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏:
‚îú‚îÄ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: ‚úÖ –ß–∏—Ç–∞—é—Ç—Å—è
‚îú‚îÄ –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 42:15 (2535 —Å–µ–∫—É–Ω–¥)
‚îú‚îÄ –í–∏–¥–µ–æ–ø–æ—Ç–æ–∫: H.264, 1920x1080, 23.976 fps
‚îú‚îÄ –ê—É–¥–∏–æ–ø–æ—Ç–æ–∫: AC-3, 5.1 –∫–∞–Ω–∞–ª–æ–≤, 640 kbps

üîç –¢–µ—Å—Ç –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è:
‚îú‚îÄ –ù–∞—á–∞–ª–æ (0-10—Å): ‚úÖ OK
‚îú‚îÄ –°–µ—Ä–µ–¥–∏–Ω–∞ (1267—Å): ‚úÖ OK  
‚îú‚îÄ –ö–æ–Ω–µ—Ü (2525-2535—Å): ‚úÖ OK
‚îú‚îÄ –ß–∏—Ç–∞–µ–º–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 2535/2535 —Å–µ–∫—É–Ω–¥ (100.0%)

‚úÖ –°—Ç–∞—Ç—É—Å: COMPLETE
   –§–∞–π–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é —á–∏—Ç–∞–µ—Ç—Å—è –∏ –≥–æ—Ç–æ–≤ –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ
```

### JSON –æ—Ç—á–µ—Ç
```json
{
  "file_path": "TWD.[S07E04].HD1080.DD5.1.LostFilm.mkv",
  "file_size": 1937891328,
  "timestamp": "2024-01-15T10:30:00",
  "integrity_check": {
    "status": "COMPLETE",
    "confidence": 1.0,
    "metadata": {
      "duration": 2535.0,
      "video_codec": "h264",
      "resolution": "1920x1080",
      "fps": 23.976,
      "audio_codec": "ac3",
      "channels": 6
    },
    "decode_test": {
      "segments_tested": 3,
      "segments_passed": 3,
      "readable_duration": 2535.0,
      "readability_ratio": 1.0,
      "errors": []
    }
  }
}
```

## üõ†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
```python
def create_test_scenarios():
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤"""
    
    scenarios = [
        {
            'name': 'complete_file',
            'description': '–ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª',
            'expected_status': VideoIntegrityStatus.COMPLETE
        },
        {
            'name': 'truncated_file', 
            'description': '–û–±—Ä–µ–∑–∞–Ω–Ω—ã–π —Ñ–∞–π–ª (50% –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞)',
            'expected_status': VideoIntegrityStatus.INCOMPLETE
        },
        {
            'name': 'corrupted_header',
            'description': '–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ñ–∞–π–ª–∞',
            'expected_status': VideoIntegrityStatus.CORRUPTED
        }
    ]
    
    return scenarios
```

### –ü–∞–∫–µ—Ç–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
def batch_integrity_test(directory, formats=None):
    """–ü–∞–∫–µ—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏"""
    
    if formats is None:
        formats = ['.mkv', '.mp4', '.avi', '.mov']
    
    checker = VideoIntegrityChecker()
    results = []
    
    for file_path in Path(directory).rglob('*'):
        if file_path.suffix.lower() in formats:
            status = checker.check_integrity(file_path)
            results.append({
                'file': str(file_path),
                'status': status.value,
                'size': file_path.stat().st_size
            })
    
    return results
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –∑–∞–≥—Ä—É–∑–æ–∫
```python
def integrate_with_download_monitor():
    """–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞"""
    
    from core.download_monitor import DownloadMonitor
    
    def on_download_complete(file_info):
        """Callback –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏"""
        
        if file_info.file_path.suffix.lower() in VIDEO_EXTENSIONS:
            checker = VideoIntegrityChecker()
            status = checker.check_integrity(file_info.file_path)
            
            if status != VideoIntegrityStatus.COMPLETE:
                logger.warning(f"‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å—é: {file_info.file_path}")
                # –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏–ª–∏ –ø–æ–º–µ—Ç–∏—Ç—å –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
    
    monitor = DownloadMonitor()
    monitor.add_callback(on_download_complete)
```

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç
```python
def generate_integrity_report(results):
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–≤–æ–¥–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞"""
    
    total_files = len(results)
    status_counts = {}
    
    for result in results:
        status = result['status']
        status_counts[status] = status_counts.get(status, 0) + 1
    
    report = {
        'summary': {
            'total_files': total_files,
            'complete': status_counts.get('COMPLETE', 0),
            'incomplete': status_counts.get('INCOMPLETE', 0),
            'corrupted': status_counts.get('CORRUPTED', 0),
            'unreadable': status_counts.get('UNREADABLE', 0)
        },
        'integrity_rate': status_counts.get('COMPLETE', 0) / total_files * 100,
        'problematic_files': [
            r for r in results 
            if r['status'] != 'COMPLETE'
        ]
    }
    
    return report
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### FFmpeg –Ω–µ –Ω–∞–π–¥–µ–Ω
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ FFmpeg
ffmpeg -version
ffprobe -version

# Windows (—á–µ—Ä–µ–∑ Chocolatey)
choco install ffmpeg

# Linux
sudo apt install ffmpeg

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Python
python -c "import subprocess; subprocess.run(['ffprobe', '-version'])"
```

#### –¢–∞–π–º–∞—É—Ç—ã –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
```python
# –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ç–∞–π–º–∞—É—Ç–∞
checker = VideoIntegrityChecker(timeout=300)  # 5 –º–∏–Ω—É—Ç

# –ò–ª–∏ —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
python video_integrity_test.py --timeout 300
```

#### –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω–æ—Å—Ç—å
```python
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
checker = VideoIntegrityChecker(readability_threshold=0.95)  # 95% –≤–º–µ—Å—Ç–æ 98%

# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç—Ä–æ–≥–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
checker.set_strict_mode(False)
```

### –û—Ç–ª–∞–¥–∫–∞
```bash
# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è
python video_integrity_test.py --verbose --debug

# –¢–µ—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
python video_integrity_test.py --file "problem_file.mkv" --log-level DEBUG

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ FFmpeg –∫–æ–º–∞–Ω–¥ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
python video_integrity_test.py --save-commands --output-dir "/temp/debug"
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### Cron –∑–∞–¥–∞—á–∞ –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab
0 2 * * * cd /path/to/PlexAudioConverter && python Tools/video_integrity_test.py --directory "/media/downloads" --json > /var/log/integrity_check.json
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```python
def setup_integrity_notifications():
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö"""
    
    def check_and_notify(directory):
        results = batch_integrity_test(directory)
        problematic = [r for r in results if r['status'] != 'COMPLETE']
        
        if problematic:
            message = f"üö® –ù–∞–π–¥–µ–Ω–æ {len(problematic)} –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:\n"
            for file_info in problematic[:5]:  # –ü–µ—Ä–≤—ã–µ 5
                message += f"‚Ä¢ {Path(file_info['file']).name}: {file_info['status']}\n"
            
            # –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
            send_telegram_message(message)
    
    return check_and_notify
```

### GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```yaml
name: Video Integrity Tests
on:
  schedule:
    - cron: '0 2 * * *'  # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 2:00
  workflow_dispatch:

jobs:
  integrity-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'
      - name: Install FFmpeg
        run: sudo apt-get install ffmpeg
      - name: Run integrity tests
        run: |
          python Tools/video_integrity_test.py --directory ./test_videos --json > integrity_results.json
      - name: Upload results
        uses: actions/upload-artifact@v3
        with:
          name: integrity-test-results
          path: integrity_results.json
```

---

*–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤—ã—Å–æ–∫—É—é —Ç–æ—á–Ω–æ—Å—Ç—å –¥–µ—Ç–µ–∫—Ü–∏–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –≤–∏–¥–µ–æ—Ñ–∞–π–ª–æ–≤ –∏ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –º–µ–¥–∏–∞—Ç–µ–∫–∏.*
